<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathQuiz Pro - Interface Enseignant</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <nav class="teacher-nav">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-calculator"></i>
                <span>MathQuiz Pro</span>
            </div>
            <div class="nav-links">
                <a href="/" class="nav-link">
                    <i class="fas fa-home"></i>
                    Accueil
                </a>
                <a href="#" class="nav-link active" id="createTab">
                    <i class="fas fa-plus"></i>
                    Créer Quiz
                </a>
                <a href="#" class="nav-link" id="manageTab">
                    <i class="fas fa-cogs"></i>
                    Gérer Quiz
                </a>
                <a href="#" class="nav-link" id="statisticsTab">
                    <i class="fas fa-chart-bar"></i>
                    Statistiques
                </a>
            </div>
        </div>
    </nav>

    <main class="teacher-main">
        <!-- Section Créer Quiz -->
        <section id="createSection" class="section active">
            <div class="section-header">
                <h2>
                    <i class="fas fa-plus-circle"></i>
                    Créer un Nouveau Quiz
                </h2>
                <p>Configurez votre quiz interactif en quelques clics</p>
            </div>

            <div class="create-quiz-container">
                <form id="createQuizForm" class="quiz-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="quizTitle">
                                <i class="fas fa-heading"></i>
                                Titre du Quiz
                            </label>
                            <input type="text" id="quizTitle" name="title" required 
                                   placeholder="Ex: Fonctions du Second Degré">
                        </div>

                        <div class="form-group">
                            <label for="quizLevel">
                                <i class="fas fa-layer-group"></i>
                                Niveau
                            </label>
                            <select id="quizLevel" name="level" required>
                                <option value="">Sélectionner un niveau</option>
                                <option value="6ème">6ème</option>
                                <option value="5ème">5ème</option>
                                <option value="4ème">4ème</option>
                                <option value="3ème">3ème</option>
                                <option value="Seconde">Seconde</option>
                                <option value="Première_Spé">Première Spé</option>
                                <option value="Terminale_Spé">Terminale Spé</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="quizChapter">
                                <i class="fas fa-book"></i>
                                Chapitre
                            </label>
                            <select id="quizChapter" name="chapter" required>
                                <option value="">Sélectionner un chapitre</option>
                                <option value="Nombres_et_calculs">Nombres et Calculs</option>
                                <option value="Géométrie">Géométrie</option>
                                <option value="Fonctions">Fonctions</option>
                                <option value="Stats_et_probabilités">Statistiques et Probabilités</option>
                                <option value="Algorithmique">Algorithmique</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="questionCount">
                                <i class="fas fa-list-ol"></i>
                                Nombre de Questions
                            </label>
                            <select id="questionCount" name="questionCount" required>
                                <option value="5">5 questions</option>
                                <option value="10" selected>10 questions</option>
                                <option value="15">15 questions</option>
                                <option value="20">20 questions</option>
                                <option value="25">25 questions</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="timePerQuestion">
                                <i class="fas fa-clock"></i>
                                Temps par Question (secondes)
                            </label>
                            <select id="timePerQuestion" name="timePerQuestion" required>
                                <option value="15">15 secondes</option>
                                <option value="20" selected>20 secondes</option>
                                <option value="30">30 secondes</option>
                                <option value="45">45 secondes</option>
                                <option value="60">60 secondes</option>
                            </select>
                        </div>

                        <div class="form-group full-width">
                            <label for="quizDescription">
                                <i class="fas fa-align-left"></i>
                                Description (optionnel)
                            </label>
                            <textarea id="quizDescription" name="description" rows="3" 
                                      placeholder="Description du contenu du quiz..."></textarea>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="previewQuestions()">
                            <i class="fas fa-eye"></i>
                            Aperçu Questions
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-rocket"></i>
                            Créer et Lancer le Quiz
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Section Gérer Quiz -->
        <section id="manageSection" class="section">
            <div class="section-header">
                <h2>
                    <i class="fas fa-cogs"></i>
                    Gérer le Quiz Actif
                </h2>
                <p>Contrôlez le déroulement du quiz en temps réel</p>
            </div>

            <div id="noActiveQuiz" class="no-quiz-message">
                <div class="empty-state">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>Aucun Quiz Actif</h3>
                    <p>Créez d'abord un quiz pour pouvoir le gérer</p>
                    <button class="btn btn-primary" onclick="switchTab('createTab')">
                        <i class="fas fa-plus"></i>
                        Créer un Quiz
                    </button>
                </div>
            </div>

            <div id="activeQuizManager" class="quiz-manager hidden">
                <div class="quiz-info-card">
                    <div class="quiz-header-info">
                        <h3 id="activeQuizTitle">Titre du Quiz</h3>
                        <div class="quiz-meta">
                            <span class="quiz-code">
                                <i class="fas fa-key"></i>
                                Code: <strong id="quizCode">000000</strong>
                            </span>
                            <span class="participant-count">
                                <i class="fas fa-users"></i>
                                <span id="participantCount">0</span> participant(s)
                            </span>
                        </div>
                    </div>
                    
                    <div class="quiz-controls">
                        <button id="startQuizBtn" class="btn btn-success">
                            <i class="fas fa-play"></i>
                            Démarrer le Quiz
                        </button>
                        <button id="nextQuestionBtn" class="btn btn-primary hidden">
                            <i class="fas fa-forward"></i>
                            Question Suivante
                        </button>
                        <button id="endQuizBtn" class="btn btn-danger hidden">
                            <i class="fas fa-stop"></i>
                            Terminer le Quiz
                        </button>
                    </div>
                </div>

                <div class="quiz-live-data">
                    <div class="live-stats">
                        <div class="stat-card">
                            <i class="fas fa-question-circle"></i>
                            <div class="stat-info">
                                <span class="stat-number" id="currentQuestionNum">0</span>
                                <span class="stat-label">Question Actuelle</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-clock"></i>
                            <div class="stat-info">
                                <span class="stat-number" id="timeRemaining">--</span>
                                <span class="stat-label">Temps Restant</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-chart-line"></i>
                            <div class="stat-info">
                                <span class="stat-number" id="responseRate">0%</span>
                                <span class="stat-label">Taux de Réponse</span>
                            </div>
                        </div>
                    </div>

                    <div class="current-question-display">
                        <h4>Question Actuelle:</h4>
                        <div id="currentQuestionText" class="question-display">
                            Aucune question active
                        </div>
                    </div>

                    <div class="participants-list">
                        <h4>
                            <i class="fas fa-users"></i>
                            Participants Connectés
                        </h4>
                        <div id="participantsList" class="participants-grid">
                            <!-- Les participants seront ajoutés dynamiquement -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Statistiques -->
        <section id="statisticsSection" class="section">
            <div class="section-header">
                <h2>
                    <i class="fas fa-chart-bar"></i>
                    Statistiques et Résultats
                </h2>
                <p>Analysez les performances et progressions</p>
            </div>

            <div class="stats-container">
                <div class="stats-overview">
                    <div class="overview-card">
                        <i class="fas fa-trophy"></i>
                        <div class="overview-info">
                            <span class="overview-number">0</span>
                            <span class="overview-label">Quiz Complétés</span>
                        </div>
                    </div>
                    <div class="overview-card">
                        <i class="fas fa-user-graduate"></i>
                        <div class="overview-info">
                            <span class="overview-number">0</span>
                            <span class="overview-label">Élèves Participants</span>
                        </div>
                    </div>
                    <div class="overview-card">
                        <i class="fas fa-percent"></i>
                        <div class="overview-info">
                            <span class="overview-number">0%</span>
                            <span class="overview-label">Taux de Réussite Moyen</span>
                        </div>
                    </div>
                </div>

                <div class="results-table-container">
                    <h4>Derniers Résultats</h4>
                    <div class="table-wrapper">
                        <table class="results-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Quiz</th>
                                    <th>Participants</th>
                                    <th>Moyenne</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="resultsTableBody">
                                <tr class="empty-row">
                                    <td colspan="5" class="text-center">
                                        <i class="fas fa-inbox"></i>
                                        Aucun résultat disponible
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal pour l'aperçu des questions -->
    <div id="previewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>
                    <i class="fas fa-eye"></i>
                    Aperçu des Questions
                </h3>
                <button class="modal-close" onclick="closePreviewModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="questionsPreview">
                    <!-- Les questions seront affichées ici -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closePreviewModal()">Fermer</button>
                <button class="btn btn-primary" onclick="createQuizFromPreview()">
                    <i class="fas fa-rocket"></i>
                    Créer ce Quiz
                </button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="js/teacher.js"></script>
</body>
</html>